extends ../layout
    
block head
  title=`TransportVic - ${trip.departureTime} ${trip.origin} to ${trip.destination}`
  
block title
  span=`${trip.departureTime} ${trip.origin.split('/')[0]} to ${trip.destination.split('/')[0]}`
  
block style
  link(rel='stylesheet' href='/static/css/runs/base-style.css')
  link(rel='stylesheet' href='/static/css/runs/trains.css')

block content
  div.timing-list
    for stop in trip.stopTimings
      div.timingRow(id='stop-' + stop.stopGTFSID)
        a.departureInfo
          -
            let stopParts = stop.stopName.split('/')
            let stopRoad, stopName
            if (stopParts.length === 2) {
              stopName = stopParts[0]
              stopRoad = stopParts[1]
            } else {
              if (stopParts = stop.stopName.match(/^(\d+) (.+)$/)) {
                stopRoad = stopParts[2]
                stopName = stopParts[1] + ' ' + stopRoad
              } else {
                stopName = stop.stopName
                stopRoad = ''
              }
            }
          span.stopRoad=stopRoad
          span.stopName=stopName
        div(class=`timing ${stop.headwayDevianceClass}`)
          span=stop.prettyTimeToArrival
          span=stop.departureTime || stop.arrivalTime
