# Edit this file to introduce tasks to be run by cron.
# 
# Each task to run has to be defined through a single line
# indicating with different fields when the task will be run
# and what command to run for the task
# 
# To define the time you can provide concrete values for
# minute (m), hour (h), day of month (dom), month (mon),
# and day of week (dow) or use '*' in these fields (for 'any').
# 
# Notice that tasks will be started based on the cron's system
# daemon's notion of time and timezones.
# 
# Output of the crontab jobs (including errors) is sent through
# email to the user the crontab file belongs to (unless redirected).
# 
# For example, you can run a backup of all your user accounts
# at 5 a.m every week with:
# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/
# 
# For more information see the manual pages of crontab(5) and cron(8)
# 
# m h  dom mon dow   command

# For details see man 4 crontabs

# Example of job definition:
# .---------------- minute (0 - 59)
# |     .------------- hour (0 - 23)
# |     |     .---------- day of month (1 - 31)
# |     |     |     .------- month (1 - 12) OR jan,feb,mar,apr ...
# |     |     |     |     .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
# |     |     |     |     |
# *     *     *     *     *     command to be executed

  # Operational Timetable loaders
  1     1     *     *     *     node /home/transportvic/TransportVic/Server/modules/op-timetable/load-metro-op-tt.mjs
  1     3     *     *     *     node /home/transportvic/TransportVic/Server/modules/new-tracker/metro/metro-trips-schedule.mjs

  5     3     *     *     *     node /home/transportvic/TransportVic/Server/modules/op-timetable/save-vline-op-tt.mjs
  */5   3-23  *     *     *     node /home/transportvic/TransportVic/Server/modules/op-timetable/load-vline-op-tt.mjs
  */10  0-1   *     *     *     node /home/transportvic/TransportVic/Server/modules/op-timetable/load-vline-op-tt.mjs

  5     1     *     *     *     node /home/transportvic/TransportVic/Server/modules/op-timetable/load-coach-op-tt.mjs
  7     1     *     *     *     node /home/transportvic/TransportVic/Server/modules/op-timetable/load-tram-op-tt.mjs
  2     3     *     *     *     node /home/transportvic/TransportVic/Server/modules/op-timetable/load-bus-op-tt.mjs
  2     1     *     *     *     node /home/transportvic/TransportVic/Server/modules/op-timetable/load-regional-bus-op-tt.mjs
  0     1     *     *     *     node /home/transportvic/TransportVic/Server/modules/op-timetable/load-overland-op-tt.mjs

  # Metro Tracker
  # Regular trips everyday 0400 - 2359
  *     4-23  *     *     *     node /home/transportvic/TransportVic/Server/modules/new-tracker/metro.mjs
  # Regular weeknights until 2530 (1.30am). This is effectively Tuesday 12-1.30am - Friday 12-1.30am
  *     0     *     *     2-5   node /home/transportvic/TransportVic/Server/modules/new-tracker/metro-night.mjs
  0-30  1     *     *     2-5   node /home/transportvic/TransportVic/Server/modules/new-tracker/metro-night.mjs
  # Fri and Sat all night, noting that it is on the next day so Saturday and Sunday 12am - 4am
  *     0-2   *     *     6-7   node /home/transportvic/TransportVic/Server/modules/new-tracker/metro-night.mjs
  *     3     *     *     6-7   node /home/transportvic/TransportVic/Server/modules/new-tracker/metro.mjs
  # Sun up to 2am (Monday 12am-2am)
  *     0-2   *     *     1     node /home/transportvic/TransportVic/Server/modules/new-tracker/metro-night.mjs

  # Metro RRB Tracker
  # Daily from 4am to 10pm. Offset by 1min to allow data to load in on MTM's end. Runs hourly
  1     *     *     *     *     node /home/transportvic/TransportVic/Server/load-gtfs/metro-rail-bus/load.mjs
  # Daily from 4am to 2am. Runs every minute
  *     4-23  *     *     *     node /home/transportvic/TransportVic/Server/modules/new-tracker/metro-rail-bus/load-rt-updates.mjs
  *     0-1   *     *     *     node /home/transportvic/TransportVic/Server/modules/new-tracker/metro-rail-bus/load-rt-updates.mjs
  # Runs 2-4am as well on Saturday and Sunday mornings (from Friday and Saturday's PT day)
  *     2-3   *     *     6-7   node /home/transportvic/TransportVic/Server/modules/new-tracker/metro-rail-bus/load-rt-updates.mjs

  # V/Line Tracker
  # Regular trips everyday 0400 - 2359
  *     4-23  *     *     *     node /home/transportvic/TransportVic/Server/modules/new-tracker/vline.mjs
  # And then 0000-0200
  *     0-1   *     *     *     node /home/transportvic/TransportVic/Server/modules/new-tracker/vline.mjs

  # Bus Tracker
  # Regular trips everyday 0400 - 2359
  *     4-5   *     *     *     node /home/transportvic/TransportVic/Server/modules/new-tracker/bus.mjs
  *     6-8   *     *     *     node /home/transportvic/TransportVic/Server/modules/new-tracker/bus.mjs
  *     9-14  *     *     *     node /home/transportvic/TransportVic/Server/modules/new-tracker/bus.mjs
  *     15-19 *     *     *     node /home/transportvic/TransportVic/Server/modules/new-tracker/bus.mjs
  *     20-23 *     *     *     node /home/transportvic/TransportVic/Server/modules/new-tracker/bus.mjs
  # Regular weeknights until 2530 (1.30am). This is effectively Tuesday 12-1.30am - Friday 12-1.30am
  *     0     *     *     2-5   node /home/transportvic/TransportVic/Server/modules/new-tracker/bus.mjs
  0-30  1     *     *     2-5   node /home/transportvic/TransportVic/Server/modules/new-tracker/bus.mjs
  # Fri and Sat all night, noting that it is on the next day so Saturday and Sunday 12am - 4am
  *     0-2   *     *     6-7   node /home/transportvic/TransportVic/Server/modules/new-tracker/bus.mjs
  *     3     *     *     6-7   node /home/transportvic/TransportVic/Server/modules/new-tracker/bus.mjs
  # Sun up to 2am (Monday 12am-2am)
  *     0-2   *     *     1     node /home/transportvic/TransportVic/Server/modules/new-tracker/bus.mjs

  # Other maintenance scripts
  5     0     *     *     *     sudo reboot
  8     0     *     *     *     /home/transportvic/TransportVic/Server/scripts/check-gtfs-updates.sh

  15    0     *     *     *     sudo reboot
  18    0     *     *     *     /home/transportvic/TransportVic/Server/scripts/check-gtfs-updates.sh

  25    0     *     *     *     sudo reboot
  28    0     *     *     *     /home/transportvic/TransportVic/Server/scripts/check-gtfs-updates.sh

  50    23    *     *     *     node /home/transportvic/TransportVic/Server/scripts/gen-bus-depots.mjs
  0     4     *     *     *     node /home/transportvic/TransportVic/Server/scripts/update-consists.mjs
  0     0     *     *     *     node /home/transportvic/TransportVic/Server/scripts/cleanup.mjs
  0     0     *     *     *     node /home/transportvic/TransportVic/Server/scripts/rotate-logs.mjs
  50    3     *     *     *     node /home/transportvic/TransportVic/Server/load-gtfs/xpt/load-all.js
  0     3     */2   *     *     /home/transportvic/TransportVic/Backups/backup.sh